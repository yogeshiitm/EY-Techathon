{% extends "vaccine_delivery/base.html" %}
{% load static %}
{% load humanize %}
{% static "images" as baseUrl %}

{% block content %}

<!-- Breadcrumb-->
<div class="row pt-2 pb-2">
    <div class="col-sm-9 py-2">
        <h4 class="page-title">District Health Administrator</h4>
        <!-- <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javaScript:void();">Dashtreme</a></li>
                <li class="breadcrumb-item"><a href="javaScript:void();">Pages</a></li>
                <li class="breadcrumb-item active" aria-current="page">User Profile</li>
            </ol> -->
    </div>
</div>
<!-- End Breadcrumb-->


<!-- the below form submits 5 inputs from the admin state, district,age,category, number of users -->
<form method="post" action="{% url 'healthadmin' %}">
    {% csrf_token %}

    <div class="row">
        <div class="col-lg-4">
            <div class="card profile-card-2">
                <div class="card-img-block">
                    <img class="img-fluid" src="{% static 'images/dashboard.jpg' %}" alt="image"
                        style="height: 110% !important;  width:100% !important">
                </div>
                <div class="card-body pt-4">
                    <!-- <img src="{% static 'images/profile2.png' %}" alt="profile-image" class="profile"> -->
                    <h5 class="card-title pb-0 mb-0">Name: {{name}}</h5>
                    <h5 class="card-title pt-0 mt-0">Email: {{email}}</h5>
                    <!-- <h5 class="card-title">{{name}}</h5> -->
                </div>

                <!-- <div class="card-body border-top border-light">
                <div class="media align-items-center">
                </div>
            </div> -->
            </div>

            <!-- <div class="card mt-3">
            <div class="card-content">
                <div class="row row-group m-0">
                    <div class="col-12 border-light">
                        <div class="card-body">
                          <h5 class="text-white mb-0">1051 <span class="float-right"><i class="fa fa-plus-circle"></i></span></h5>
                            <div class="progress my-3" style="height:3px;">
                              <div class="progress-bar" style="width:11.63%"></div>
                            </div>
                          <p class="mb-0 text-white small-font">No. of Health Workers Vaccinated </p>
                        </div>
                    </div>
                    <div class="col-12 border-light">
                        <div class="card-body">
                          <h5 class="text-white mb-0">217 <span class="float-right"><i class="fa fa-users"></i></span></h5>
                            <div class="progress my-3" style="height:3px;">
                              <div class="progress-bar" style="width:0.9%"></div>
                            </div>
                          <p class="mb-0 text-white small-font">No. of People over 50 years of age Vaccinated</p>
                        </div>
                    </div>
                    <div class="col-12 border-light">
                        <div class="card-body">
                          <h5 class="text-white mb-0">51 <span class="float-right"><i class="	fa fa-pencil-square-o"></i></span></h5>
                            <div class="progress my-3" style="height:3px;">
                              <div class="progress-bar" style="width:20.2%"></div>
                            </div>
                          <p class="mb-0 text-white small-font">No. of People under 50 years with comorbidities.</p>
                        </div>
                    </div>
                    <div class="col-12 border-light">
                        <div class="card-body">
                          <h5 class="text-white mb-0">17<span class="float-right"><i class="fa fa-envira"></i></span></h5>
                            <div class="progress my-3" style="height:3px;">
                              <div class="progress-bar" style="width:7.8%"></div>
                            </div>
                          <p class="mb-0 text-white small-font">Others</p>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->




            <div class="card mt-3">
                <div class="card-content">
                    <div class="row row-group m-0">
                        <div class="col-12 border-light ">



                            <h5 class="card-title pb-0 mb-0 mt-4 mx-4">Enter the number of users to be notified for
                                vaccinaation</h5>


                            <div class="card-body py-0">
                                <div class="form-group row py-4">
                                    <div class="col-sm-12">
                                        <input type="text" class="form-control py-4" id="input-24" name="vaccine"
                                            placeholder="No. of vaccines" required pattern="\S+.*" />

                                        <button type="submit"
                                            class="btn btn-white btn-lg btn-block waves-effect waves-light mt-4">Search
                                            users</button>
                                        {% comment %} <button type="submit" action="{% url 'notifyusers' %}"
                                            class="btn btn-info btn-lg btn-block waves-effect waves-light my-2">Notify
                                            the users</button> {% endcomment %}
                                        <a class="btn btn-info btn-lg btn-block waves-effect waves-light my-2">Notify
                                            the users</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <ul class="nav nav-tabs nav-tabs-primary top-icon nav-justified">
                        <li class="nav-item">
                            <a href="javascript:void();" data-target="#profile" data-toggle="pill"
                                class="nav-link active"><i class="icon-note"></i> <span
                                    class="hidden-xs">Vaccine</span></a>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:void();" data-target="#messages" data-toggle="pill" class="nav-link"><i
                                    class="icon-user"></i> <span class="hidden-xs">Profile</span></a>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:void();" data-target="#edit" data-toggle="pill" class="nav-link"><i
                                    class="icon-envelope-open"></i> <span class="hidden-xs">Medical details</span></a>
                        </li>
                    </ul>
                    <div class="tab-content p-3">
                        <div class="tab-pane active" id="profile">
                            <!-- <h5 class="mb-3">In your district {{data.district}}</h5> -->
                            <h5 class="mb-3">Users to be called for vaccination</h5>


                            <div class="card mt-3">
                                <div class="card-content">
                                    <div class="row row-group m-0">
                                        <div class="col-12 border-light">
                                            <div class="card-body">

                                                <div class="form-group row">
                                                    <label for="input-19" class="col-sm-3 col-form-label">State</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control single-select" name="state">
                                                            {% if states %}
                                                            {% for state in states %}
                                                            <option value="{{state.state}}">{{state.state}}</option>
                                                            {% endfor %}
                                                            {% endif %}
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <label for="input-19"
                                                        class="col-sm-3 col-form-label">District</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="input-23"
                                                            name="district" placeholder="District" required
                                                            pattern="\S+.*" />
                                                    </div>
                                                </div>


                                                <div class="form-group row">
                                                    <label for="input-19"
                                                        class="col-sm-3 col-form-label">Category</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control single-select" name='category'>
                                                            <option value=5>All</option>
                                                            <option value=1>Health/Frontline Workers</option>
                                                            <option value=3>People with comorbidities</option>
                                                            <option value=4>Others</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <label for="input-19" class="col-sm-3 col-form-label">Age
                                                        group</label>
                                                    <div class="col-sm-9">
                                                        <select class="form-control single-select" name='age'>
                                                            <option value=1>All</option>
                                                            <option value=2>Above 60</option>
                                                            <option value=3>Below 60</option>
                                                        </select>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            {% if users %}

                            <h5 class="mb-3">Users in your district who satisfy the above criteria are</h5>


                            <div class="row">
                                <div class="col-12 col-lg-12">
                                    <div class="card">


                                        <!-- <div class="card-header card-action dropdown-toggle dropdown-toggle-nocaret">
                          State Level Analysis
                        </div> -->

                                        <div class="table-responsive">

                                            <table class="table align-items-center table-flush table-borderless"
                                                style="table-layout: auto; width: 100%;">
                                                <thead>
                                                    <tr>
                                                        <th style="text-align:left">Name</th>
                                                        <th style="text-align:right">Aadhaar</th>
                                                        <th style="text-align:right">Priority Score</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    {% for user in users %}
                                                    <tr>
                                                        <td style="text-align:left">{{ user.user.first_name }}
                                                            {{user.user.last_name }} </td>
                                                        <td style="text-align:right">{{ user.adhaar }}</td>
                                                        <td style="text-align:right">{{ user.illness_score |
                                                            floatformat:2 }}</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--End Row-->

                            {% else %}
                            {% if request.method == 'POST' %}

                            <h5 class="mb-3">Users in your district who satisfy the above criteria are</h5>

                            <div class="row">
                                <div class="col-12 col-lg-12">
                                    <div class="card">
                                        <div class="card-header card-action dropdown-toggle dropdown-toggle-nocaret">
                                            Currently there are no such user
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            {% endif %}

                            <!-- <div class="card mt-3">
                    <div class="card-content">
                        <div class="row row-group m-0">
                            <div class="col-12 border-light">
                                <div class="card-body">
                                    To be announced.<br><hr>
                                    It is important to acknowledge that there might be a degree of vaccine eagerness but people will have to wait to get vaccine access, based on the defined prioritization criteria.
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->

                            <!--/row-->
                        </div>
                        <div class="tab-pane" id="messages">
                            <form>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Name</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{name}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Email</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="email"
                                            value="{{email}}">
                                    </div>
                                </div>
                                <!-- <div class="form-group row">
                        <label class="col-lg-3 col-form-label form-control-label">Change profile</label>
                        <div class="col-lg-9">
                            <input class="form-control" type="file">
                        </div>
                    </div> -->
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">State</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" onkeydown="return false"
                                            class="form-control" type="text" value="{{user.state}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">District</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.district}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Pincode</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.pincode}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Aadhaar No.</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.adhaar}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Mobile No.</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.mobile}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Age</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.age}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Gender</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.gender}}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label form-control-label">Occupation</label>
                                    <div class="col-lg-9">
                                        <input readonly onkeydown="return false" class="form-control" type="text"
                                            value="{{user.occupation}}">
                                    </div>
                                </div>
                                <!-- <div class="form-group row">
                        <label class="col-lg-3 col-form-label form-control-label"></label>
                        <div class="col-lg-9">
                            <input type="reset" class="btn btn-secondary" value="Cancel">
                            <input type="button" class="btn btn-primary" value="Save Changes">
                        </div>
                    </div> -->
                            </form>

                        </div>
                        <div class="tab-pane" id="edit">


                            <div class="col-12">


                                <div class="card-title">Medical History</div>
                                <hr>
                                <!-- <div class="pb-3">Mark the health issues you have ever had:</div> -->

                                <form>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Covid-19</label>
                                                <div class="col-sm-4">

                                                    {% if user.covid == 1 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" name="Covid-19" value="1" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" name="Covid-19"
                                                            value="1" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Diabetes</label>
                                                <div class="col-sm-4">

                                                    {% if user.diabetes == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26"
                                                    class="col-sm-8 col-form-label">Hypertension</label>
                                                <div class="col-sm-4">

                                                    {% if user.hbp_hyt == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Lung
                                                    Disease</label>
                                                <div class="col-sm-4">

                                                    {% if user.respiratory == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Heart
                                                    Disease</label>
                                                <div class="col-sm-4">

                                                    {% if user.chd == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Liver
                                                    Disorder</label>
                                                <div class="col-sm-4">

                                                    {% if user.liver_disease == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Reduced kidney
                                                    function</label>
                                                <div class="col-sm-4">

                                                    {% if user.reduced_kidney == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">None of the
                                                    above</label>
                                                <div class="col-sm-4">

                                                    {% if user.no_illness != 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-6">
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Kidney
                                                    dialysis</label>
                                                <div class="col-sm-4">

                                                    {% if user.kidney_dialysis == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Smoking</label>
                                                <div class="col-sm-4">

                                                    {% if user.smoker == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Stroke or
                                                    dementia</label>
                                                <div class="col-sm-4">

                                                    {% if user.strk_dmtia == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Cancer
                                                    (non-haematological)</label>
                                                <div class="col-sm-4">

                                                    {% if user.cancer_non == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Haematological
                                                    malignancy</label>
                                                <div class="col-sm-4">

                                                    {% if user.hmt == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Other Neurological
                                                    disease</label>
                                                <div class="col-sm-4">

                                                    {% if user.other_neuro == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label for="input-26" class="col-sm-8 col-form-label">Organ
                                                    transplant</label>
                                                <div class="col-sm-4">

                                                    {% if user.organ_transplant == 0 %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% else %}
                                                    <div class="icheck-material-white">
                                                        <input readonly type="checkbox" checked="" />
                                                        <label for="user-checkbox1"></label>
                                                    </div>
                                                    {% endif %}

                                                </div>
                                            </div>
                                        </div>
                                </form>
                            </div>


                        </div>
                    </div>
                </div>
            </div>



</form>


<!-- <script>
        document.getElementById("user-checkbox1").disabled=true;
        document.getElementById("user-checkbox2").disabled=true;
        document.getElementById("user-checkbox3").disabled=true;
        document.getElementById("user-checkbox4").disabled=true;
        document.getElementById("user-checkbox5").disabled=true;
        document.getElementById("user-checkbox6").disabled=true;
        document.getElementById("user-checkbox7").disabled=true;
        document.getElementById("user-checkbox8").disabled=true;
        document.getElementById("user-checkbox9").disabled=true;
        document.getElementById("user-checkbox10").disabled=true;
        document.getElementById("user-checkbox11").disabled=true;
        document.getElementById("user-checkbox12").disabled=true;
        document.getElementById("user-checkbox13").disabled=true;
        document.getElementById("user-checkbox14").disabled=true;
        document.getElementById("user-checkbox15").disabled=true;
    </script> -->

{% endblock %}